(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{477:function(e,t,n){var content=n(478);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(25).default)("48751daa",content,!0,{sourceMap:!1})},478:function(e,t,n){(t=n(24)(!1)).push([e.i,'.theme--light.v-expansion-panels .v-expansion-panel{background-color:#fff;color:rgba(0,0,0,.87)}.theme--light.v-expansion-panels .v-expansion-panel--disabled{color:rgba(0,0,0,.38)}.theme--light.v-expansion-panels .v-expansion-panel:not(:first-child):after{border-color:rgba(0,0,0,.12)}.theme--light.v-expansion-panels .v-expansion-panel-header .v-expansion-panel-header__icon .v-icon{color:rgba(0,0,0,.54)}.theme--light.v-expansion-panels.v-expansion-panels--focusable .v-expansion-panel-header:hover:before{opacity:.04}.theme--light.v-expansion-panels.v-expansion-panels--focusable .v-expansion-panel-header--active:before,.theme--light.v-expansion-panels.v-expansion-panels--focusable .v-expansion-panel-header--active:hover:before,.theme--light.v-expansion-panels.v-expansion-panels--focusable .v-expansion-panel-header:focus:before{opacity:.12}.theme--light.v-expansion-panels.v-expansion-panels--focusable .v-expansion-panel-header--active:focus:before{opacity:.16}.theme--light.v-expansion-panels.v-expansion-panels--hover>.v-expansion-panel>.v-expansion-panel-header:hover:hover:before{opacity:.04}.theme--light.v-expansion-panels.v-expansion-panels--hover>.v-expansion-panel>.v-expansion-panel-header:hover--active:before,.theme--light.v-expansion-panels.v-expansion-panels--hover>.v-expansion-panel>.v-expansion-panel-header:hover--active:hover:before,.theme--light.v-expansion-panels.v-expansion-panels--hover>.v-expansion-panel>.v-expansion-panel-header:hover:focus:before{opacity:.12}.theme--light.v-expansion-panels.v-expansion-panels--hover>.v-expansion-panel>.v-expansion-panel-header:hover--active:focus:before{opacity:.16}.theme--dark.v-expansion-panels .v-expansion-panel{background-color:#1e1e1e;color:#fff}.theme--dark.v-expansion-panels .v-expansion-panel--disabled{color:hsla(0,0%,100%,.5)}.theme--dark.v-expansion-panels .v-expansion-panel:not(:first-child):after{border-color:hsla(0,0%,100%,.12)}.theme--dark.v-expansion-panels .v-expansion-panel-header .v-expansion-panel-header__icon .v-icon{color:#fff}.theme--dark.v-expansion-panels.v-expansion-panels--focusable .v-expansion-panel-header:hover:before{opacity:.08}.theme--dark.v-expansion-panels.v-expansion-panels--focusable .v-expansion-panel-header--active:before,.theme--dark.v-expansion-panels.v-expansion-panels--focusable .v-expansion-panel-header--active:hover:before,.theme--dark.v-expansion-panels.v-expansion-panels--focusable .v-expansion-panel-header:focus:before{opacity:.24}.theme--dark.v-expansion-panels.v-expansion-panels--focusable .v-expansion-panel-header--active:focus:before{opacity:.32}.theme--dark.v-expansion-panels.v-expansion-panels--hover>.v-expansion-panel>.v-expansion-panel-header:hover:hover:before{opacity:.08}.theme--dark.v-expansion-panels.v-expansion-panels--hover>.v-expansion-panel>.v-expansion-panel-header:hover--active:before,.theme--dark.v-expansion-panels.v-expansion-panels--hover>.v-expansion-panel>.v-expansion-panel-header:hover--active:hover:before,.theme--dark.v-expansion-panels.v-expansion-panels--hover>.v-expansion-panel>.v-expansion-panel-header:hover:focus:before{opacity:.24}.theme--dark.v-expansion-panels.v-expansion-panels--hover>.v-expansion-panel>.v-expansion-panel-header:hover--active:focus:before{opacity:.32}.v-expansion-panels{border-radius:4px;display:flex;flex-wrap:wrap;justify-content:center;list-style-type:none;padding:0;width:100%;z-index:1}.v-expansion-panels>*{cursor:auto}.v-expansion-panels>:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.v-expansion-panels>:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.v-expansion-panels:not(.v-expansion-panels--accordion):not(.v-expansion-panels--tile)>.v-expansion-panel--active{border-radius:4px}.v-expansion-panels:not(.v-expansion-panels--accordion):not(.v-expansion-panels--tile)>.v-expansion-panel--active+.v-expansion-panel{border-top-left-radius:4px;border-top-right-radius:4px}.v-expansion-panels:not(.v-expansion-panels--accordion):not(.v-expansion-panels--tile)>.v-expansion-panel--next-active{border-bottom-left-radius:4px;border-bottom-right-radius:4px}.v-expansion-panels:not(.v-expansion-panels--accordion):not(.v-expansion-panels--tile)>.v-expansion-panel--next-active .v-expansion-panel-header{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.v-expansion-panel{flex:1 0 100%;max-width:100%;position:relative;transition:.3s cubic-bezier(.25,.8,.5,1)}.v-expansion-panel:before{border-radius:inherit;bottom:0;content:"";left:0;position:absolute;right:0;top:0;z-index:-1;transition:box-shadow .28s cubic-bezier(.4,0,.2,1);will-change:box-shadow;box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)}.v-expansion-panel:not(:first-child):after{border-top:thin solid;content:"";left:0;position:absolute;right:0;top:0;transition:border-color .2s cubic-bezier(.4,0,.2,1),opacity .2s cubic-bezier(.4,0,.2,1)}.v-expansion-panel--disabled .v-expansion-panel-header{pointer-events:none}.v-expansion-panel--active+.v-expansion-panel,.v-expansion-panel--active:not(:first-child){margin-top:16px}.v-expansion-panel--active+.v-expansion-panel:after,.v-expansion-panel--active:not(:first-child):after{opacity:0}.v-expansion-panel--active>.v-expansion-panel-header{min-height:64px}.v-expansion-panel--active>.v-expansion-panel-header--active .v-expansion-panel-header__icon:not(.v-expansion-panel-header__icon--disable-rotate) .v-icon{transform:rotate(-180deg)}.v-expansion-panel-header__icon{display:inline-flex;margin-bottom:-4px;margin-top:-4px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.v-application--is-ltr .v-expansion-panel-header__icon{margin-left:auto}.v-application--is-rtl .v-expansion-panel-header__icon{margin-right:auto}.v-expansion-panel-header{align-items:center;border-top-left-radius:inherit;border-top-right-radius:inherit;display:flex;font-size:.9375rem;line-height:1;min-height:48px;outline:none;padding:16px 24px;position:relative;transition:min-height .3s cubic-bezier(.25,.8,.5,1);width:100%}.v-application--is-ltr .v-expansion-panel-header{text-align:left}.v-application--is-rtl .v-expansion-panel-header{text-align:right}.v-expansion-panel-header:not(.v-expansion-panel-header--mousedown):focus:before{opacity:.12}.v-expansion-panel-header:before{background-color:currentColor;border-radius:inherit;bottom:0;content:"";left:0;opacity:0;pointer-events:none;position:absolute;right:0;top:0;transition:opacity .3s cubic-bezier(.25,.8,.5,1)}.v-expansion-panel-header>:not(.v-expansion-panel-header__icon){flex:1 1 auto}.v-expansion-panel-content{display:flex}.v-expansion-panel-content__wrap{padding:0 24px 16px;flex:1 1 auto;max-width:100%}.v-expansion-panels--accordion>.v-expansion-panel{margin-top:0}.v-expansion-panels--accordion>.v-expansion-panel:after{opacity:1}.v-expansion-panels--popout>.v-expansion-panel{max-width:calc(100% - 32px)}.v-expansion-panels--popout>.v-expansion-panel--active{max-width:calc(100% + 16px)}.v-expansion-panels--inset>.v-expansion-panel{max-width:100%}.v-expansion-panels--inset>.v-expansion-panel--active{max-width:calc(100% - 32px)}.v-expansion-panels--flat>.v-expansion-panel:after{border-top:none}.v-expansion-panels--flat>.v-expansion-panel:before{box-shadow:0 0 0 0 rgba(0,0,0,.2),0 0 0 0 rgba(0,0,0,.14),0 0 0 0 rgba(0,0,0,.12)}.v-expansion-panels--tile,.v-expansion-panels--tile>.v-expansion-panel:before{border-radius:0}',""]),e.exports=t},479:function(e,t,n){var content=n(480);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(25).default)("dc0628f2",content,!0,{sourceMap:!1})},480:function(e,t,n){(t=n(24)(!1)).push([e.i,".v-tooltip{display:none}.v-tooltip--attached{display:inline}.v-tooltip__content{background:rgba(97,97,97,.9);color:#fff;border-radius:4px;font-size:14px;line-height:22px;display:inline-block;padding:5px 16px;position:absolute;text-transform:none;width:auto;opacity:1;pointer-events:none}.v-tooltip__content--fixed{position:fixed}.v-tooltip__content[class*=-active]{transition-timing-function:cubic-bezier(0,0,.2,1)}.v-tooltip__content[class*=enter-active]{transition-duration:.15s}.v-tooltip__content[class*=leave-active]{transition-duration:75ms}",""]),e.exports=t},488:function(e,t,n){var content=n(528);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(25).default)("1dee1762",content,!0,{sourceMap:!1})},520:function(e,t,n){"use strict";n(15),n(14),n(9),n(16),n(17),n(13),n(10);var o=n(4),r=n(148),l=n(146),c=n(2),v=n(8);function d(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}t.a=Object(v.a)(Object(r.a)("expansionPanels","v-expansion-panel","v-expansion-panels"),Object(l.b)("expansionPanel",!0)).extend({name:"v-expansion-panel",props:{disabled:Boolean,readonly:Boolean},data:function(){return{content:null,header:null,nextIsActive:!1}},computed:{classes:function(){return function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({"v-expansion-panel--active":this.isActive,"v-expansion-panel--next-active":this.nextIsActive,"v-expansion-panel--disabled":this.isDisabled},this.groupClasses)},isDisabled:function(){return this.expansionPanels.disabled||this.disabled},isReadonly:function(){return this.expansionPanels.readonly||this.readonly}},methods:{registerContent:function(e){this.content=e},unregisterContent:function(){this.content=null},registerHeader:function(e){this.header=e,e.$on("click",this.onClick)},unregisterHeader:function(){this.header=null},onClick:function(e){e.detail&&this.header.$el.blur(),this.$emit("click",e),this.isReadonly||this.isDisabled||this.toggle()},toggle:function(){var e=this;this.content&&(this.content.isBooted=!0),this.$nextTick((function(){return e.$emit("change")}))}},render:function(e){return e("div",{staticClass:"v-expansion-panel",class:this.classes,attrs:{"aria-expanded":String(this.isActive)}},Object(c.n)(this))}})},521:function(e,t,n){"use strict";var o=n(122),r=n(165),l=n(37),c=n(146),v=n(2),d=n(8),h=Object(d.a)(r.a,l.a,Object(c.a)("expansionPanel","v-expansion-panel-content","v-expansion-panel"));t.a=h.extend().extend({name:"v-expansion-panel-content",computed:{isActive:function(){return this.expansionPanel.isActive}},created:function(){this.expansionPanel.registerContent(this)},beforeDestroy:function(){this.expansionPanel.unregisterContent()},render:function(e){var t=this;return e(o.a,this.showLazyContent((function(){return[e("div",t.setBackgroundColor(t.color,{staticClass:"v-expansion-panel-content",directives:[{name:"show",value:t.isActive}]}),[e("div",{class:"v-expansion-panel-content__wrap"},Object(v.n)(t))])]})))}})},522:function(e,t,n){"use strict";n(15),n(14),n(9),n(16),n(17),n(13),n(10);var o=n(4),r=n(122),l=n(121),c=n(37),v=n(146),d=n(107),h=n(2),f=n(8);function m(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function x(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?m(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):m(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var _=Object(f.a)(c.a,Object(v.a)("expansionPanel","v-expansion-panel-header","v-expansion-panel"));t.a=_.extend().extend({name:"v-expansion-panel-header",directives:{ripple:d.a},props:{disableIconRotate:Boolean,expandIcon:{type:String,default:"$expand"},hideActions:Boolean,ripple:{type:[Boolean,Object],default:!1}},data:function(){return{hasMousedown:!1}},computed:{classes:function(){return{"v-expansion-panel-header--active":this.isActive,"v-expansion-panel-header--mousedown":this.hasMousedown}},isActive:function(){return this.expansionPanel.isActive},isDisabled:function(){return this.expansionPanel.isDisabled},isReadonly:function(){return this.expansionPanel.isReadonly}},created:function(){this.expansionPanel.registerHeader(this)},beforeDestroy:function(){this.expansionPanel.unregisterHeader()},methods:{onClick:function(e){this.$emit("click",e)},genIcon:function(){var e=Object(h.n)(this,"actions")||[this.$createElement(l.a,this.expandIcon)];return this.$createElement(r.c,[this.$createElement("div",{staticClass:"v-expansion-panel-header__icon",class:{"v-expansion-panel-header__icon--disable-rotate":this.disableIconRotate},directives:[{name:"show",value:!this.isDisabled}]},e)])}},render:function(e){var t=this;return e("button",this.setBackgroundColor(this.color,{staticClass:"v-expansion-panel-header",class:this.classes,attrs:{tabindex:this.isDisabled?-1:null,type:"button"},directives:[{name:"ripple",value:this.ripple}],on:x(x({},this.$listeners),{},{click:this.onClick,mousedown:function(){return t.hasMousedown=!0},mouseup:function(){return t.hasMousedown=!1}})}),[Object(h.n)(this,"default",{open:this.isActive},!0),this.hideActions||this.genIcon()])}})},523:function(e,t,n){"use strict";n(15),n(14),n(181),n(9),n(182),n(16),n(17),n(13),n(10);var o=n(4),r=(n(477),n(170)),l=n(12);function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function v(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}t.a=r.a.extend({name:"v-expansion-panels",provide:function(){return{expansionPanels:this}},props:{accordion:Boolean,disabled:Boolean,flat:Boolean,hover:Boolean,focusable:Boolean,inset:Boolean,popout:Boolean,readonly:Boolean,tile:Boolean},computed:{classes:function(){return v(v({},r.a.options.computed.classes.call(this)),{},{"v-expansion-panels":!0,"v-expansion-panels--accordion":this.accordion,"v-expansion-panels--flat":this.flat,"v-expansion-panels--hover":this.hover,"v-expansion-panels--focusable":this.focusable,"v-expansion-panels--inset":this.inset,"v-expansion-panels--popout":this.popout,"v-expansion-panels--tile":this.tile})}},created:function(){this.$attrs.hasOwnProperty("expand")&&Object(l.a)("expand","multiple",this),Array.isArray(this.value)&&this.value.length>0&&"boolean"==typeof this.value[0]&&Object(l.a)(':value="[true, false, true]"',':value="[0, 2]"',this)},methods:{updateItem:function(e,t){var n=this.getValue(e,t),o=this.getValue(e,t+1);e.isActive=this.toggleMethod(n),e.nextIsActive=this.toggleMethod(o)}}})},524:function(e,t,n){"use strict";n(18);var o=n(4),r=(n(479),n(104)),l=n(37),c=n(163),v=n(113),d=n(164),h=n(207),f=n(47),m=n(2),x=n(12),_=n(8);t.a=Object(_.a)(l.a,c.a,v.a,d.a,h.a,f.a).extend({name:"v-tooltip",props:{closeDelay:{type:[Number,String],default:0},disabled:Boolean,fixed:{type:Boolean,default:!0},openDelay:{type:[Number,String],default:0},openOnHover:{type:Boolean,default:!0},tag:{type:String,default:"span"},transition:String},data:function(){return{calculatedMinWidth:0,closeDependents:!1}},computed:{calculatedLeft:function(){var e=this.dimensions,t=e.activator,content=e.content,n=!(this.bottom||this.left||this.top||this.right),o=!1!==this.attach?t.offsetLeft:t.left,r=0;return this.top||this.bottom||n?r=o+t.width/2-content.width/2:(this.left||this.right)&&(r=o+(this.right?t.width:-content.width)+(this.right?10:-10)),this.nudgeLeft&&(r-=parseInt(this.nudgeLeft)),this.nudgeRight&&(r+=parseInt(this.nudgeRight)),"".concat(this.calcXOverflow(r,this.dimensions.content.width),"px")},calculatedTop:function(){var e=this.dimensions,t=e.activator,content=e.content,n=!1!==this.attach?t.offsetTop:t.top,o=0;return this.top||this.bottom?o=n+(this.bottom?t.height:-content.height)+(this.bottom?10:-10):(this.left||this.right)&&(o=n+t.height/2-content.height/2),this.nudgeTop&&(o-=parseInt(this.nudgeTop)),this.nudgeBottom&&(o+=parseInt(this.nudgeBottom)),"".concat(this.calcYOverflow(o+this.pageYOffset),"px")},classes:function(){return{"v-tooltip--top":this.top,"v-tooltip--right":this.right,"v-tooltip--bottom":this.bottom,"v-tooltip--left":this.left,"v-tooltip--attached":""===this.attach||!0===this.attach||"attach"===this.attach}},computedTransition:function(){return this.transition?this.transition:this.isActive?"scale-transition":"fade-transition"},offsetY:function(){return this.top||this.bottom},offsetX:function(){return this.left||this.right},styles:function(){return{left:this.calculatedLeft,maxWidth:Object(m.f)(this.maxWidth),minWidth:Object(m.f)(this.minWidth),opacity:this.isActive?.9:0,top:this.calculatedTop,zIndex:this.zIndex||this.activeZIndex}}},beforeMount:function(){var e=this;this.$nextTick((function(){e.value&&e.callActivate()}))},mounted:function(){"v-slot"===Object(m.o)(this,"activator",!0)&&Object(x.b)("v-tooltip's activator slot must be bound, try '<template #activator=\"data\"><v-btn v-on=\"data.on>'",this)},methods:{activate:function(){this.updateDimensions(),requestAnimationFrame(this.startTransition)},deactivate:function(){this.runDelay("close")},genActivatorListeners:function(){var e=this,t=r.a.options.methods.genActivatorListeners.call(this);return t.focus=function(t){e.getActivator(t),e.runDelay("open")},t.blur=function(t){e.getActivator(t),e.runDelay("close")},t.keydown=function(t){t.keyCode===m.r.esc&&(e.getActivator(t),e.runDelay("close"))},t},genActivatorAttributes:function(){return{"aria-haspopup":!0,"aria-expanded":String(this.isActive)}},genTransition:function(){var content=this.genContent();return this.computedTransition?this.$createElement("transition",{props:{name:this.computedTransition}},[content]):content},genContent:function(){var e;return this.$createElement("div",this.setBackgroundColor(this.color,{staticClass:"v-tooltip__content",class:(e={},Object(o.a)(e,this.contentClass,!0),Object(o.a)(e,"menuable__content__active",this.isActive),Object(o.a)(e,"v-tooltip__content--fixed",this.activatorFixed),e),style:this.styles,attrs:this.getScopeIdAttrs(),directives:[{name:"show",value:this.isContentActive}],ref:"content"}),this.getContentSlot())}},render:function(e){var t=this;return e(this.tag,{staticClass:"v-tooltip",class:this.classes},[this.showLazyContent((function(){return[t.genTransition()]})),this.genActivator()])}})},527:function(e,t,n){"use strict";n(488)},528:function(e,t,n){(t=n(24)(!1)).push([e.i,".horizontal-list{overflow-x:auto;white-space:nowrap;-webkit-overflow-scrolling:touch;padding-left:0!important;padding-right:0}.item{display:inline-block;margin-right:16px}",""]),e.exports=t},541:function(e,t,n){"use strict";n.r(t);n(9),n(65),n(13),n(19),n(29),n(10),n(52),n(56);var o=n(20),r=n(137),l=n.n(r),c=n(167),v=c.a.firestore.FieldValue,d=c.a.firestore();function h(e,t){var n,o,r,l=[];for(n=0;n<=e.length;n++)l[n]=[n];for(o=0;o<=t.length;o++)l[0][o]=o;for(n=1;n<=e.length;n++)for(o=1;o<=t.length;o++)r=e.charCodeAt(n-1)===t.charCodeAt(o-1)?0:1,l[n][o]=Math.min(l[n-1][o]+1,l[n][o-1]+1,l[n-1][o-1]+r);return l[e.length][t.length]/Math.max(e.length,t.length)}var f={asyncData:function(e){return Object(o.a)(regeneratorRuntime.mark((function t(){var n,o,r,c,v,d,h,i,f,m,x,_,y,k,w,I,j,C,O,D,P;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.payload,o=e.app,!n){t.next=5;break}return t.abrupt("return",{result:n});case 5:return r=o.context.params.id,c={},t.next=9,l.a.get(o.context.env.BASE_URL+"/nuxt.json");case 9:for(d in(v=t.sent).data)c[d]=v.data[d];h=["kyoto01","kyoto02","ndl02","ndl03","ndl04","nijl","utokyo"],i=0;case 13:if(!(i<h.length)){t.next=22;break}return f=h[i],t.next=17,l.a.get(o.context.env.BASE_URL+"/data/json/"+f+".json");case 17:for(x in(m=t.sent).data)c[x]=m.data[x];case 19:i++,t.next=13;break;case 22:for(w in _=c[r],y=_.arr,k={},y){for(I=[],j=y[w],C=0;C<j.length;C++)O=j[C],(D=c[O.id]).score=O.score,I.push(D);k[w]=I}return P={item:_,arr:k},t.abrupt("return",{result:P,nuxt:c});case 28:case"end":return t.stop()}}),t)})))()},data:function(){return{baseUrl:"https://nakamura196.github.io/genji2020",prefix:"https://nakamura196.github.io/genji2020",select:"すべて",selectedText:"",isSignedIn:!1,checkbox:{},like:!0,dialog:!1,rItemId:"",lItemId:"",lText:"",highlight_line_index:-1,documents:[],documentIds:[],uid:"",login:!1}},computed:{url:function(){return this.baseUrl+"/item/"+this.$route.params.id},id:function(){return this.$route.params.id},title:function(){var e=this.item;return e.vol_str+" "+e.page+e.type},items:function(){var e=this.result.arr,t=["すべて"];for(var n in e)e[n].length>0&&t.push(n);return t},rItem:function(){var e=this.rItemId;return this.nuxt[e]||{}},lItem:function(){var e=this.lItemId;return this.selectedText="",this.nuxt[e]||{}},item:function(){return this.result.item}},watch:{selectedText:function(){this.update_highlight()},rItem:function(){this.update_highlight()}},created:function(){var e=this;c.a.firestore().collection("kouis").doc(this.id).collection("documents").onSnapshot((function(t){var n={},r=[];t.forEach(function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(t){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=t.data().likedUsers||[],n[t.id]=o,r.push(t.id);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.documents=n,e.documentIds=r}),(function(e){console.error("GET_REALTIME_LIST",e)})),this.onAuthStateChanged(),console.log(this.result);for(var t={},n=this.result.arr,i=0;i<n.length;i++)t[n[i].objectID]=[];var r=c.a.firestore().collection(this.result.item.objectID);r?r.get().then((function(n){n.forEach((function(e){t[e.id]=Array.isArray(e.data().values)?e.data().values:[e.data().values]})),e.checkbox=t})).catch((function(e){console.log("error : "+e)})):this.checkbox=t},methods:{update_highlight:function(){var e=this.selectedText,t=this.rItem;if(0!=Object.keys(t).length){for(var n=t.label,map={},o=0;o<n.length;o++){var r=h(e,n[o]);map[o]=r}var l=Object.keys(map).map((function(e){return{key:e,value:map[e]}}));l.sort((function(a,b){return a.value<b.value?-1:a.value>b.value?1:0}));var c=l[0].key;this.highlight_line_index=c}else this.highlight_line_index=-1},onAuthStateChanged:function(){var e=this;c.a.auth().onAuthStateChanged((function(t){e.uid=t.uid||"",e.login=!!t,e.userName=t?t.displayName:null,e.userPic=t?t.photoURL:null,e.isSignedIn=!!t}))},getIframeUrl:function(e){return e.manifest?this.baseUrl+"/curation/?manifest="+e.manifest+"&canvas="+encodeURIComponent(e.canvas):this.baseUrl+"/curation/?curation="+e.curation+"&pos="+e.pos},selected:function(){this.selectedText=window.getSelection().toString()},getCurationUrl:function(){var e=this.result.item;return e.curation?"http://codh.rois.ac.jp/software/iiif-curation-viewer/demo/?curation="+e.curation+"&pos="+e.pos+"&mode=annotation":"http://codh.rois.ac.jp/software/iiif-curation-viewer/demo/?manifest="+e.manifest+"&canvas="+e.canvas},toArray2:function(map){var e=[];for(var t in map)e.push({key:t,text:map[t]});return console.log(e),e},checkLike:function(){return this.like},good:function(e,t){var n=this;return Object(o.a)(regeneratorRuntime.mark((function o(){var r,l,h,f,m,x,_;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,c.a.firestore().collection("kouis").doc(n.id).get();case 2:if(r=o.sent,l=r.ref,r.exists){o.next=7;break}return o.next=7,l.set({id:n.id,createTime:v.serverTimestamp(),updateTime:v.serverTimestamp()});case 7:return o.next=9,c.a.firestore().collection("kouis").doc(n.id).collection("documents").doc(e).get();case 9:if(h=o.sent,f=h.ref,h.exists){o.next=14;break}return o.next=14,f.set({id:e,createTime:v.serverTimestamp(),updateTime:v.serverTimestamp(),likedUsers:[]});case 14:return m=d.batch(),o.next=17,c.a.firestore().collection("users").doc(n.uid).get();case 17:return x=o.sent,_=x.ref,t?(m.update(d.doc(f.path),{updateTime:v.serverTimestamp(),likedUsers:c.a.firestore.FieldValue.arrayUnion(_.id)}),m.set(d.doc(_.path).collection("likedDocs").doc(f.id),{id:f.id,postRef:f,createTime:v.serverTimestamp()}),m.update(_,{likeDocCount:v.increment(1)})):(m.update(d.doc(f.path),{updateTime:v.serverTimestamp(),likedUsers:c.a.firestore.FieldValue.arrayRemove(_.id)}),m.delete(d.doc(_.path).collection("likedDocs").doc(f.id)),m.update(_,{likeDocCount:v.increment(-1)})),o.next=22,m.commit();case 22:case"end":return o.stop()}}),o)})))()}},head:function(){var title=this.title;return{title:title,meta:[{hid:"og:title",property:"og:title",content:title},{hid:"og:type",property:"og:type",content:"article"},{hid:"og:url",property:"og:url",content:this.url},{hid:"og:image",property:"og:image",content:this.result.item.image},{hid:"twitter:card",name:"twitter:card",content:"summary_large_image"}]}}},m=(n(527),n(106)),x=n(147),_=n.n(x),y=n(301),k=n(215),w=n(98),I=n(496),j=n(464),C=n(465),O=n(520),D=n(521),P=n(522),A=n(523),S=n(213),T=n(178),B=n(217),R=n(497),V=n(534),E=n(63),$=n(468),U=n(524),component=Object(m.a)(f,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-container",{staticClass:"py-5"},[n("iframe",{attrs:{src:e.getIframeUrl(e.item),width:"100%",height:"400",allowfullscreen:"",frameborder:"0"}}),e._v(" "),n("v-expansion-panels",{attrs:{tile:"",value:"国立国会図書館"==e.item.attribution?0:1}},[n("v-expansion-panel",{staticClass:"my-4"},[n("v-expansion-panel-header",[e._v("\n          "+e._s("国立国会図書館"==e.item.attribution?"テキスト":"OCRテキスト")+"\n        ")]),e._v(" "),n("v-expansion-panel-content",[n("p",{domProps:{innerHTML:e._s(e.item.text.split("\n").join("<b> / </b>"))},on:{select:e.selected,blur:e.selected,keyup:e.selected,click:e.selected}})])],1)],1)],1),e._v(" "),n("v-container",[n("div",{staticClass:"text-center"},[n("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on;return[n("v-btn",e._g({staticClass:"mx-1",attrs:{icon:"",target:"_blank",href:e.getCurationUrl()}},o),[n("img",{attrs:{src:e.baseUrl+"/img/icons/icp-logo.svg",width:"30px"}})])]}}])},[e._v(" "),n("span",[e._v(e._s("IIIF Curation Viewer"))])]),e._v(" "),n("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on;return[n("v-btn",e._g({staticClass:"mx-1",attrs:{icon:"",target:"_blank",href:"https://twitter.com/intent/tweet?url="+e.url}},o),[n("v-icon",[e._v("mdi-twitter")])],1)]}}])},[e._v(" "),n("span",[e._v(e._s("Twitter"))])]),e._v(" "),n("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on;return[n("v-btn",e._g({staticClass:"mx-1",attrs:{icon:"",target:"_blank",href:"https://www.facebook.com/sharer/sharer.php?u="+e.url}},o),[n("v-icon",[e._v("mdi-facebook")])],1)]}}])},[e._v(" "),n("span",[e._v(e._s("Facebook"))])]),e._v(" "),n("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on;return[n("v-btn",e._g({staticClass:"mx-1",attrs:{icon:"",target:"_blank",href:"http://getpocket.com/edit?url="+e.url}},o),[n("img",{staticStyle:{"font-size":"30px"},attrs:{src:"https://cultural.jp/img/icons/pocket.svg"}})])]}}])},[e._v(" "),n("span",[e._v(e._s("Pocket"))])]),e._v(" "),n("p",{staticClass:"my-4"},[n("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on;return[e.item.prev?n("v-btn",e._g({staticClass:"ma-1",attrs:{to:e.localePath({name:"item-id",params:{id:e.item.prev}})}},o),[n("v-icon",[e._v("mdi-chevron-left")])],1):e._e()]}}])},[e._v(" "),n("span",[e._v(e._s("前の"+e.item.type+"へ"))])]),e._v(" "),n("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on;return[e.item.next?n("v-btn",e._g({staticClass:"ma-1",attrs:{to:e.localePath({name:"item-id",params:{id:e.item.next}})}},o),[n("v-icon",[e._v("mdi-chevron-right")])],1):e._e()]}}])},[e._v(" "),n("span",[e._v(e._s("次の"+e.item.type+"へ"))])])],1)],1)]),e._v(" "),n("v-sheet",{staticClass:"pa-4 mt-5 mb-3",attrs:{color:"grey lighten-3"}},[n("v-container",[n("dl",{staticClass:"row"},[n("dt",{staticClass:"col-sm-3 text-muted"},[n("b",[e._v("URL")])]),e._v(" "),n("dd",{staticClass:"col-sm-9",staticStyle:{"overflow-wrap":"break-word"}},[n("a",{attrs:{href:e.prefix+"/item/"+e.$route.params.id}},[e._v(e._s(e.prefix+"/item/"+e.$route.params.id))])])]),e._v(" "),n("dl",{staticClass:"row"},[n("dt",{staticClass:"col-sm-3 text-muted"},[n("b",[e._v(e._s(e.$t("title")))])]),e._v(" "),n("dd",{staticClass:"col-sm-9"},[e._v("\n          "+e._s(e.item.vol_str)+" "+e._s(e.item.page)+e._s(e.item.type)+"\n        ")])]),e._v(" "),n("dl",{staticClass:"row"},[n("dt",{staticClass:"col-sm-3 text-muted"},[n("b",[e._v(e._s(e.$t("target")))])]),e._v(" "),n("dd",{staticClass:"col-sm-9"},[e._v("\n          "+e._s(e.item.target)+"\n        ")])])])],1),e._v(" "),n("v-container",[n("v-sheet",{staticClass:"pa-4 mt-5 mb-3",attrs:{color:"grey lighten-3"}},[n("v-row",[n("v-col",{attrs:{cols:"12",sm:5}},[n("h3",[e._v("類似コマ")]),e._v(" "),n("small",[n("ul",[n("li",[e._v("\n                「校異源氏物語テキスト」または「くずし字OCR結果テキスト」間の編集距離に基づく類似度を利用しています。\n              ")]),e._v(" "),n("li",[e._v("\n                すでに頁番号が付与されている場合には、背景が黄色になります。\n              ")])])])]),e._v(" "),n("v-col",{attrs:{cols:"12",sm:7}},[n("v-select",{attrs:{items:e.items,label:e.$t("target")},model:{value:e.select,callback:function(t){e.select=t},expression:"select"}})],1)],1)],1),e._v(" "),e._l(e.result.arr,(function(t,o){return["すべて"!=e.select&&o!=e.select||!e.items.includes(o)?e._e():n("div",{key:o},[n("h3",{staticClass:"mb-3 mt-5"},[e._v(e._s(o))]),e._v(" "),n("ul",{staticClass:"horizontal-list"},e._l(t,(function(t,o){return n("li",{key:o,staticClass:"item"},[n("v-card",{key:o,staticClass:"mb-5",style:e.result.item.koui.includes(t.objectID)?"background-color : #FFF59D":"",attrs:{flat:"",outlined:""}},[n("a",{on:{click:function(n){e.rItemId=t.objectID,e.lItemId=e.id,e.dialog=!0}}},[n("v-img",{staticClass:"grey lighten-2",staticStyle:{height:"150px"},attrs:{src:t.image,contain:"",width:"100%"}})],1),e._v(" "),n("v-card-text",[n("a",{on:{click:function(n){e.rItemId=t.objectID,e.lItemId=e.id,e.dialog=!0}}},[n("b",[e._v(" "+e._s(t.vol_str)+" "+e._s(t.page)+e._s(t.type)+" ")])]),e._v(" "),n("div",{staticClass:"mt-3"},[n("v-progress-linear",{attrs:{value:100*t.score,height:"25"}},[e._v("\n                    類似度:\n                    "),n("strong",[e._v(e._s(Math.ceil(100*t.score))+"%")])])],1)]),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),e.login?[e.documentIds.includes(t.objectID)?[n("v-btn",{attrs:{icon:"",color:e.documents[t.objectID].includes(e.uid)?"pink":""},on:{click:function(n){e.good(t.objectID,!e.documents[t.objectID].includes(e.uid))}}},[n("v-icon",{staticClass:"mr-1"},[e._v(e._s(e.documents[t.objectID].includes(e.uid)?"mdi-heart":"mdi-heart-outline"))]),e._v(e._s(e.documents[t.objectID].length>0?e.documents[t.objectID].length:"")+"\n                    ")],1)]:[n("v-btn",{attrs:{icon:""},on:{click:function(n){return e.good(t.objectID,!0)}}},[n("v-icon",{staticClass:"mr-1"},[e._v("mdi-heart-outline")])],1)]]:[n("div",{staticClass:"my-1"},[n("v-icon",{staticClass:"mr-1"},[e._v("mdi-heart-outline")]),e._v(e._s(e.documentIds.includes(t.objectID)?e.documents[t.objectID].length:"")+"\n                  ")],1)]],2)],1)],1)})),0)])]}))],2),e._v(" "),n("v-dialog",{attrs:{fullscreen:"","hide-overlay":"",transition:"dialog-bottom-transition"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-btn",{attrs:{fab:"",dark:"",fixed:"",top:"",right:"",small:""},on:{click:function(t){e.dialog=!1}}},[n("v-icon",[e._v("mdi-close")])],1),e._v(" "),n("v-card",[n("div",{staticClass:"pa-4"},[n("v-row",[n("v-col",[n("v-card",{attrs:{flat:"",outlined:""}},[n("iframe",{attrs:{src:e.getIframeUrl(e.lItem),width:"100%",height:"600",allowfullscreen:"",frameborder:"0"}}),e._v(" "),n("div",{staticClass:"pa-4"},[n("h3",[e._v("\n                  "+e._s(e.lItem.vol_str)+" "+e._s(e.lItem.page)+e._s(e.lItem.type)+"（"+e._s(e.lItem.target)+"）\n                ")]),e._v(" "),n("p",{staticClass:"my-2 text-center"},[e.lItem.prev?n("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on;return[n("v-btn",e._g({staticClass:"ma-1",on:{click:function(t){e.lItemId=e.lItem.prev}}},o),[n("v-icon",[e._v("mdi-chevron-left")])],1)]}}],null,!1,500547980)},[e._v(" "),n("span",[e._v(e._s("前の"+e.lItem.type+"へ"))])]):e._e(),e._v(" "),e.lItem.next?n("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on;return[n("v-btn",e._g({staticClass:"ma-1",on:{click:function(t){e.lItemId=e.lItem.next}}},o),[n("v-icon",[e._v("mdi-chevron-right")])],1)]}}],null,!1,1549152257)},[e._v(" "),n("span",[e._v(e._s("次の"+e.lItem.type+"へ"))])]):e._e()],1),e._v(" "),e.lItem.text?n("p",{staticClass:"mt-2",domProps:{innerHTML:e._s(e.lItem.text.split("\n").join("<b> / </b>"))},on:{select:e.selected,blur:e.selected,keyup:e.selected,click:e.selected}}):e._e()])])],1),e._v(" "),n("v-col",[n("v-card",{attrs:{flat:"",outlined:""}},[n("iframe",{attrs:{src:e.getIframeUrl(e.rItem),width:"100%",height:"600",allowfullscreen:"",frameborder:"0"}}),e._v(" "),n("div",{staticClass:"pa-4"},[n("h3",[e._v("\n                  "+e._s(e.rItem.vol_str)+" "+e._s(e.rItem.page)+e._s(e.rItem.type)+"（"+e._s(e.rItem.target)+"）\n                ")]),e._v(" "),n("p",{staticClass:"my-2 text-center"},[e.rItem.prev?n("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on;return[n("v-btn",e._g({staticClass:"ma-1",on:{click:function(t){e.rItemId=e.rItem.prev}}},o),[n("v-icon",[e._v("mdi-chevron-left")])],1)]}}],null,!1,4194112140)},[e._v(" "),n("span",[e._v(e._s("前の"+e.rItem.type+"へ"))])]):e._e(),e._v(" "),e.rItem.next?n("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on;return[n("v-btn",e._g({staticClass:"ma-1",on:{click:function(t){e.rItemId=e.rItem.next}}},o),[n("v-icon",[e._v("mdi-chevron-right")])],1)]}}],null,!1,4054319617)},[e._v(" "),n("span",[e._v(e._s("次の"+e.rItem.type+"へ"))])]):e._e()],1),e._v(" "),n("p",{staticClass:"mt-2"},[e._l(e.rItem.label,(function(text,t){return[t==e.highlight_line_index&&""!=e.selectedText?n("span",{key:t,staticClass:"background-color : yellow lighten-3"},[e._v("\n                      "+e._s(text)+"\n                    ")]):n("span",{key:t},[e._v("\n                      "+e._s(text)+"\n                    ")]),e._v(" "),t!=e.item.label.length-1?n("b",{key:"br-"+t},[e._v("\n                      /\n                    ")]):e._e()]}))],2)])])],1)],1),e._v(" "),n("div",{staticClass:"text-center my-10"})],1)])],1)],1)}),[],!1,null,null,null);t.default=component.exports;_()(component,{VBtn:y.a,VCard:k.a,VCardActions:w.a,VCardText:w.b,VCol:I.a,VContainer:j.a,VDialog:C.a,VExpansionPanel:O.a,VExpansionPanelContent:D.a,VExpansionPanelHeader:P.a,VExpansionPanels:A.a,VIcon:S.a,VImg:T.a,VProgressLinear:B.a,VRow:R.a,VSelect:V.a,VSheet:E.a,VSpacer:$.a,VTooltip:U.a})}}]);